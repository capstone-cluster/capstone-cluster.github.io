<!DOCTYPE html>
<html lang="en">
  <head id="head">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="Project CLUSTER - Multi-Purpose HPC Computing for the ECE Department">
    <meta name="author" content="Project CLUSTER">
    <title>Project CLUSTER</title>
    <link rel="shortcut icon" href="img/favicon.ico">
    <!-- CSS/JS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.4.1/dist/jquery.min.js,npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"></script>
    
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/blog-theo.css" rel="stylesheet" type="text/css">
  </head>

  <body class="bg-dark" data-spy="scroll" data-target=".navbar" data-offset="75">
    <header>
      <nav class="navbar fixed-top nav-pills navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/index.html#head"><i class="fa fa-server"></i> Project CLUSTER</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <div class="navbar-nav ml-auto">
            <a class="nav-item nav-link" href="/index.html#about">About</a>
            <a class="nav-item nav-link" href="/index.html#team">Team</a>
            <a class="nav-item nav-link" href="/index.html#contact">Contact</a>
          </div>
        </div>
      </nav>
    </header>
    <main role="main">
      <section class="jumbotron text-center" id="blog-top">
        <div class="container-fluid">
          <h1 class="jumbotron-heading">Theo's Blog</h1>
          <hr />
          <p>
            A journal of everything I've done for Project CLUSTER
          </p>
        </div>
      </section>
      <section id="blog-section">
        <br><br>
        <!--
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">RCE Update</h2>
                <p class="blog-post-meta">May 1, 2020 by Theo Fleck</p>
                <p>This week I built the web app that will be used to deploy workloads.
                  I had to scrape the API requests and JSON payloads from Rancher's WebUI
                  because they don't have documentation on what to send to the available endpoints.
                  I think I came up with a pretty good parameterized system to add more of these
                  containers in the future, customized versions of the code-server container would
                  be particularly easy.<br>
                  Currently, the web app has no authentication measures, ideally this would sit
                  behind UD's CAS system. I also want to modify the templates to support the creation
                  of "secrets" to store the password and sudo password instead of environment
                  variables. The server admin will still be able to read the passwords, but it adds
                  a little bit of extra security to the setup.
                </p>
                <a href="/img/blog-theo/5-1-webapp.PNG" data-lightbox="image">
                  <div class="d-flex justify-content-center">
                    <img class="img-fluid" src="/img/blog-theo/5-1-webapp.PNG">
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
        -->
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">RCE Update</h2>
                <p class="blog-post-meta">April 24, 2020 by Theo Fleck</p>
                <p>I learned how to use GitHub Actions CI/CD pipelines for the web app.
                  The idea is to store the source code on GitHub, and then have commits
                  trigger a script that builds the Docker container and pushes it to DockerHub.
                  From there, the cluster can pull down and run the container and use it
                  to deploy the configured container workloads. The purpose of this is so that
                  people could theoretically submit pull requests to add workloads to the system
                  without needing an admin to set them up manually.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">RCE Update</h2>
                <p class="blog-post-meta">April 17, 2020 by Theo Fleck</p>
                <p>After a little tweaking, we were able to get everything
                  working on the R805, now at Dr. Cotton's house. The VPN
                  we had setup prior worked after fixing a static IP issue.
                  I was able to boot up the Rancher cluster, and everything 
                  appears to be working.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">RCE Update</h2>
                <p class="blog-post-meta">April 10, 2020 by Theo Fleck</p>
                <p>Now, the RCE will be running off of the R805 instead to demonstrate a
                  virtual "cluster". I am trying to figure out what modifications need to be
                  made to the networking setup to be able to connect to pfSense and Rancher from
                  outside the UD network. If we can get pfSense connected directly to the internet,
                  we should be good.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">RCE Update</h2>
                <p class="blog-post-meta">March 13, 2020 by Theo Fleck</p>
                <p>The next two weeks are now spring break due to the virus.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">RCE Update</h2>
                <p class="blog-post-meta">March 6, 2020 by Theo Fleck</p>
                <p>I have been working on the design of the web app while waiting on the C7000 or the R805.
                  I'm going to use Node.JS, Express, and Docker to build it. I can use Rancher's API & keys
                  to interface with the system and deploy resources. Node.JS can expose a simplified API to the
                  frontend, and then make more complicated calls to Rancher. This also separates authentication measures.
                  We should be able to run this docker container within the cluster.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">RCE Update</h2>
                <p class="blog-post-meta">February 13, 2020 by Theo Fleck</p>
                <p>Now I am waiting on the C7000 while the R805 is being used for EC2.
                  I'm researching the software updates that have been released over break.
                  The whole cluster will need major updates.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">Week of November 3rd</h2>
                <p class="blog-post-meta">November 7, 2019 by Theo Fleck</p>
                <p>This week, I figured out a way to fix our networking issues.
                  Because of the dynamic, templated system for deploying the cluster
                  nodes, we were using DHCP to allocate IP addresses, but this created
                  inconsistency across reboots despite a lot of tweaking. The solution
                  is to grab the MAC address from ESXi right when the VM is created
                  and enter it into pfSense before Rancher takes over and installs the OS and begins configuring.
                  It takes a minute before Rancher takes over, so you don't have to be crazy fast.<br>
                  I also got a deployment of vscode to work using the 
                  linuxserver/code-server docker image. It can be deployed
                  with any user password and sudo password. It automatically creates
                  a redundant Longhorn volume based on the size you specify.
                  Next, we have to figure out how to make a template version of this
                  deploy automatically using the Rancher API.
                </p>
                <a href="/img/blog-theo/11-3-vscode.PNG" data-lightbox="image">
                  <div class="d-flex justify-content-center">
                    <img class="img-fluid" src="/img/blog-theo/11-3-vscode.PNG">
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">Week of October 27th</h2>
                <p class="blog-post-meta">October 31, 2019 by Theo Fleck</p>
                <p>This week, I solved some of our automation problems, I 
                  created some templates for our nodes to be configured automatically.
                  I made the YAML configuration linked through our GitHub so 
                  that way updates to certain attributes can be updated 
                  via git. The storage drivers needed for Longhorn are now 
                  taken care of automatically.
                </p>
                <a href="/img/blog-theo/10-27-config.PNG" data-lightbox="image">
                  <div class="d-flex justify-content-center">
                    <img class="img-fluid" src="/img/blog-theo/10-27-config.PNG">
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">Week of October 20th</h2>
                <p class="blog-post-meta">October 24, 2019 by Theo Fleck</p>
                <p>This week, I figured out how to get distributed persistent storage to
                  work across the cluster. We are going to use a system made by the
                  developers of Rancher called Longhorn. I decided to just provision
                  the nodes with a large disk size rather than adding additional disks
                  to a smaller node. This was much simpler to implement, and worked
                  after a little tinkering with a driver for open-iscsi.
                </p>
                <a href="/img/blog-theo/10-21-longhorn.PNG" data-lightbox="image">
                  <div class="d-flex justify-content-center">
                    <img class="img-fluid" src="/img/blog-theo/10-21-longhorn.PNG">
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-10 col-md-8">
              <div class="blog-post">
                <h2 class="blog-post-title">Week of October 13th</h2>
                <p class="blog-post-meta">October 18, 2019 by Theo Fleck</p>
                <p>This week, I set up pfSense on ESXi to control the local
                  internal network. I also set up a RancherOS master node VM, and
                  installed Rancher on it. Once we decide on the OS for the workers,
                  we can bring up the full cluster and start testing applications.</p>
                <a href="/img/blog-theo/10-14-ranchertest.PNG" data-lightbox="image">
                  <div class="d-flex justify-content-center">
                    <img class="img-fluid" src="/img/blog-theo/10-14-ranchertest.PNG">
                  </div>
                </a>
                <br>
                <a href="/img/blog-theo/10-14-pfsenseinit.PNG" data-lightbox="image">
                  <div class="d-flex justify-content-center">
                    <img class="img-fluid" src="/img/blog-theo/10-14-pfsenseinit.PNG">
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <p class="text-center">
        Copyright &copy;
        <script type="text/JavaScript">document.write(new Date().getFullYear());</script>
        Project CLUSTER, All Rights Reserved
      </p>
    </footer>
    <!-- CSS/JS -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" media="none" onload="if(media!='all')media='all'"><noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"></noscript>
    <script src="js/main.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/lightbox2@2.11.1/dist/css/lightbox.min.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/lightbox2@2.11.1/dist/js/lightbox.min.js"></script>
  </body>

</html>